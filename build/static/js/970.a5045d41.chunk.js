"use strict";(self.webpackChunkvsa_website=self.webpackChunkvsa_website||[]).push([[970],{1033:(e,t,a)=>{a.d(t,{s:()=>s});var r=a(9950);function s(e){let{title:t}=e;return(0,r.useEffect)((()=>(document.title="VSA - ".concat(t),()=>{document.title="VSA"})),[t]),null}},9326:(e,t,a)=>{a.d(t,{z:()=>i});var r=a(8429),s=a(2074),l=a(4414);function i(){const e=(0,r.zy)(),t=t=>e.pathname===t;return(0,l.jsx)("nav",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-4 mb-8",children:(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsx)(s.N_,{to:"/admin/events",className:"px-4 py-2 rounded-lg transition-colors duration-200 ".concat(t("/admin/events")?"bg-indigo-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:"Events"}),(0,l.jsx)(s.N_,{to:"/admin/gallery",className:"px-4 py-2 rounded-lg transition-colors duration-200 ".concat(t("/admin/gallery")?"bg-indigo-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:"Gallery"}),(0,l.jsx)(s.N_,{to:"/admin/feedback",className:"px-4 py-2 rounded-lg transition-colors duration-200 ".concat(t("/admin/feedback")?"bg-indigo-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:"Feedback"})]})})}},9970:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var r=a(8),s=a(9950),l=a(2348),i=a(1033),d=a(9326),o=a(4414);function n(){const[e,t]=(0,s.useState)({title:"",description:"",date:"",images:[]}),[a,n]=(0,s.useState)([]),[c,g]=(0,s.useState)([]),[m,x]=(0,s.useState)(!1),[h,u]=(0,s.useState)(null),[y,b]=(0,s.useState)([]),[p,f]=(0,s.useState)(!0),[v,w]=(0,s.useState)(null),N=async()=>{try{const{data:e,error:t}=await l.N.from("gallery_events").select("*").order("date",{ascending:!1});if(t)throw t;b(e||[])}catch(h){console.error("Error fetching galleries:",h)}finally{f(!1)}};return(0,s.useEffect)((()=>{N()}),[]),(0,o.jsxs)("div",{className:"container mx-auto px-4 py-8 bg-gray-50 dark:bg-gray-950 transition-colors duration-300",children:[(0,o.jsx)(i.s,{title:"Gallery Management"}),(0,o.jsx)(d.z,{}),(0,o.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-8",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Create New Gallery"}),(0,o.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),6===a.length)try{x(!0);const r=await Promise.all(a.map((async e=>{const t=e.name.split(".").pop(),a="".concat(Math.random(),".").concat(t),{error:r}=await l.N.storage.from("gallery_images").upload(a,e);if(r)throw r;const{data:s}=l.N.storage.from("gallery_images").getPublicUrl(a);return null===s||void 0===s?void 0:s.publicUrl}))),{error:s}=await l.N.from("gallery_events").insert([{title:e.title,description:e.description,date:e.date,images:r}]);if(s)throw s;t({title:"",description:"",date:"",images:[]}),n([]),g([]),N()}catch(h){console.error("Error creating gallery:",h)}finally{x(!1)}else u("Please select exactly 6 images")},className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Event Title"}),(0,o.jsx)("input",{type:"text",value:e.title,onChange:a=>t((0,r.A)((0,r.A)({},e),{},{title:a.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Date"}),(0,o.jsx)("input",{type:"date",value:e.date,onChange:a=>t((0,r.A)((0,r.A)({},e),{},{date:a.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),(0,o.jsx)("textarea",{value:e.description,onChange:a=>t((0,r.A)((0,r.A)({},e),{},{description:a.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:3,required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Images (Select 6 images)"}),(0,o.jsx)("input",{type:"file",onChange:e=>{const t=Array.from(e.target.files||[]);t.length>6?u("You can only upload up to 6 images"):(n(t),g(t.map((e=>URL.createObjectURL(e)))))},accept:"image/*",multiple:!0,className:"w-full",required:!0}),h&&(0,o.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h})]}),c.length>0&&(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Preview"}),(0,o.jsx)("div",{className:"grid grid-cols-3 gap-4",children:c.map(((e,t)=>(0,o.jsx)("div",{className:"relative aspect-w-16 aspect-h-9",children:(0,o.jsx)("img",{src:e,alt:"Preview ".concat(t+1),className:"w-full h-full object-cover rounded-lg"})},t)))})]}),(0,o.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50",children:m?"Uploading...":"Create Gallery"})]})]}),(0,o.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Existing Galleries"}),(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map((e=>(0,o.jsxs)("div",{className:"border rounded-lg overflow-hidden bg-white dark:bg-gray-700",children:[(0,o.jsx)("div",{className:"grid grid-cols-3 gap-2 p-2",children:e.images.map(((t,a)=>(0,o.jsx)("div",{className:"relative aspect-w-16 aspect-h-9",children:(0,o.jsx)("img",{src:t,alt:"".concat(e.title," - Image ").concat(a+1),className:"w-full h-full object-cover rounded"})},a)))}),(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.title}),(0,o.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.description}),(0,o.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:new Date(e.date).toLocaleDateString()}),(0,o.jsx)("div",{className:"mt-4 flex justify-end",children:v===e.id?(0,o.jsxs)("div",{className:"flex space-x-2",children:[(0,o.jsx)("button",{onClick:()=>(async e=>{try{const{data:t}=await l.N.from("gallery_events").select("images").eq("id",e).single();t&&await Promise.all(t.images.map((async e=>{const t=e.split("/").pop();t&&await l.N.storage.from("gallery_images").remove([t])})));const{error:a}=await l.N.from("gallery_events").delete().eq("id",e);if(a)throw a;b(y.filter((t=>t.id!==e))),w(null)}catch(t){console.error("Error deleting gallery:",t),u("Failed to delete gallery")}})(e.id),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Confirm"}),(0,o.jsx)("button",{onClick:()=>w(null),className:"px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:"Cancel"})]}):(0,o.jsx)("button",{onClick:()=>w(e.id),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Delete"})})]})]},e.id)))})]}),h&&(0,o.jsxs)("div",{className:"fixed bottom-4 right-4 bg-red-600 text-white px-6 py-3 rounded-lg shadow-lg",children:[h,(0,o.jsx)("button",{onClick:()=>u(null),className:"ml-4 text-white hover:text-gray-200",children:"\xd7"})]})]})}}}]);